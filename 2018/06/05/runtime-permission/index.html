<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            runtime-permission | 
        
        Moodstrikerdd
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="Moodstrikerdd的博客">
    <meta name="keywords" content="Android,api">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Moodstrikerdd">
    <meta name="msapplication-starturl" content="http://www.moodstrikerdd.com/2018/06/05/runtime-permission/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Moodstrikerdd">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://www.moodstrikerdd.com/2018/06/05/runtime-permission/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="runtime-permission | Moodstrikerdd">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="Moodstrikerdd的博客">
    <meta property="og:article:tag" content="api"> 

    
        <meta property="article:published_time" content="Tue Jun 05 2018 10:26:56 GMT+0800">
        <meta property="article:modified_time" content="Tue Jun 05 2018 17:41:19 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://www.moodstrikerdd.com/2018/06/05/runtime-permission/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://www.moodstrikerdd.com/2018/06/05/runtime-permission/index.html",
    "headline": "runtime-permission",
    "datePublished": "Tue Jun 05 2018 10:26:56 GMT+0800",
    "dateModified": "Tue Jun 05 2018 17:41:19 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Moodstrikerdd",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "人生不易，靠的是坚持不懈地走在正道；<br> &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;勿忘初衷，不要被世俗蒙蔽了双眼。"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Moodstrikerdd",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",apiAndroid",
    "description": "Moodstrikerdd的博客",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

<link rel="stylesheet" href="/css/prism-darcula.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-0运行时权限"><span class="post-toc-number">2.</span> <span class="post-toc-text">6.0运行时权限</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#运行时权限简介"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">运行时权限简介</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#敏感权限"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">敏感权限</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#运行时权限Api"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">运行时权限Api</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#运行时权限封装"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">运行时权限封装</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-0运行时权限"><span class="post-toc-number">3.</span> <span class="post-toc-text">8.0运行时权限</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                runtime-permission
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Moodstrikerdd</strong>
        <span>6月 05, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAAC0ElEQVR42u3aQU7EMAwF0N7/0rBFAsK3XaCTvKzQqDPNCwvL/rnejlwXNjY2NjY2NjY29iPZV7y++KHWkx8/+fxMBGjtGRsbG3tvdvKa7z5Z/0IVfNcBYWNjY5/J/q4AJM/kJS0peOvDre4ZGxsbG3vCzr9V3QM2NjY29vyVyYgnaRKS4oeNjY2NfddQKR/K5+Oh5Pf/eZaGjY2N/Xh2FfOEv/8038bGxsZ+MLu68oi3evkmaU5G78LGxsbelJ0XhrtaiGqLMh9jYWNjY+/Nro5pcurkUk40JIqDZGxsbOy92Xk5ybeSPJ8/kw+51nvAxsbGPpM9B/eC3ur4aRT0YmNjY2/HXheSyXH0gtteLI2NjY19Gjsf8U/GPb0mpPo7t6Ui2NjY2C/LXrcB+aCnF+VWn8xjCWxsbOxz2EkzkJScasPTiwpGQyVsbGzs7djV0pWXt2obUx0qRd/FxsbG3prduxzzG6Fvb3QVFVFsbGzsw9jzlqA6NkqCgep7sbGxsc9k3zvQ7xXLfIw1GiphY2Njb8ROLuUkvKu45iWqMMDCxsbG3po9KULVQVK1UOUNzA/DL2xsbOyt2UlByovcJGDIi1P5H4CNjY29KTu/LpMPm/LRTyGmHVwMwsbGxj6BXS0GzWZgWaiSo18fa+HKDjY2NvZG7OpQqfr6STOTvzEqkNjY2Nhbs3sxahIJ3HsBaBRLY2NjYx/DzsPXPGDItzgZSGFjY2NjV7feuy6ZFLnrpoWNjY19Aru6Jo3HJFTIj76cb2NjY2O/OLtXDPLjqF4A6h1Ws25jY2Njb8SejGyS8KB3JSjZZ2E/2NjY2Aewk/B1EuL2ML8+S8PGxsY+mD05oF48XN0bNjY2NnZ+IWbUJLQ+yd+LjY2NfQ671zDkRagaP+SRQBRXYGNjY2/Nzgc01Wi2R01K3bpAYmNjY5/DPmdhY2NjY2NjY2NjP2a9A6/JNDZbZ2zOAAAAAElFTkSuQmCC">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/api/">api</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=runtime-permission&url=http://www.moodstrikerdd.com/2018/06/05/runtime-permission/index.html&pic=http://www.moodstrikerdd.com/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=runtime-permission&url=http://www.moodstrikerdd.com/2018/06/05/runtime-permission/index.html&via=Moodstrikerdd" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://www.moodstrikerdd.com/2018/06/05/runtime-permission/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://www.moodstrikerdd.com/2018/06/05/runtime-permission/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Moodstrikerdd&title=runtime-permission&summary=Moodstrikerdd的博客&pics=http://www.moodstrikerdd.com/img/favicon.png&url=http://www.moodstrikerdd.com/2018/06/05/runtime-permission/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>文中涉及代码都在我的<a href="https://github.com/moodstrikerdd/DemoGo" target="_blank" rel="noopener">github</a>上。如有不足之处，欢迎指正。QQ：542814693。</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在Android 6.0 SDK 23的时候，google为了安全推出了运行时权限，控制app对用户手机权限的获取。在Android 8.0 SDK 26的时候，google进一步的优化了运行时权限。</p>
<h3 id="6-0运行时权限"><a href="#6-0运行时权限" class="headerlink" title="6.0运行时权限"></a>6.0运行时权限</h3><h4 id="运行时权限简介"><a href="#运行时权限简介" class="headerlink" title="运行时权限简介"></a>运行时权限简介</h4><p>在6.0以前，即targetSdkVersion &lt; 23时，app获取用户手机权限，只需要在AndroidManifest.xml文件中声明相应权限即可，如：</p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;
</code></pre><p>而在6.0以后，想要获取某些敏感权限不仅仅需要在AndroidManifest.xml文件中声明，还要通过运行时权限Api去动态获取，用户可以根据具体使用情况授权相应权限或者拒绝相应授权。</p>
<h4 id="敏感权限"><a href="#敏感权限" class="headerlink" title="敏感权限"></a>敏感权限</h4><p>google官方文档上有相应表格显示哪些是敏感权限，即需要兼容运行时权限的权限和权限组。<br><img src="/2018/06/05/runtime-permission/permissions.png" alt=""></p>
<h4 id="运行时权限Api"><a href="#运行时权限Api" class="headerlink" title="运行时权限Api"></a>运行时权限Api</h4><p>关于运行时权限，在support包中的ActivityCompat中提供了相应的Api</p>
<pre><code>public static int checkSelfPermission(@NonNull Context context, @NonNull String permission)

public static void requestPermissions(final @NonNull Activity activity,
            final @NonNull String[] permissions, final @IntRange(from = 0) int requestCode)

public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,
            @NonNull int[] grantResults)

public static boolean shouldShowRequestPermissionRationale(@NonNull Activity activity,
            @NonNull String permission)
</code></pre><p><strong>checkSelfPermission</strong>：检查app是否已经被授权了某个权限，一般在请求权限之前调用。</p>
<p>   android.content.pm.PackageManager#PERMISSION_GRANTED 已经授权 </p>
<p>   android.content.pm.PackageManager#PERMISSION_DENIED 没有授权<br><strong>requestPermission</strong>：请求权限，可同时请求多个。当用户已经拒绝过该权限切选择了不再提醒 requestPermission将不会获取权限<br><strong>onRequestPermissionsResult</strong>：Activity中请求权限的结果回调<br><strong>shouldShowRequestPermissionRationale</strong>字面意思是是否应该显示请求权限的根据，在使用中有以下情况</p>
<p>   1.没有请求该权限之前，返回false</p>
<p>   2.请求拒绝该权限，但是没有选择不再提醒，返回true</p>
<p>   3.请求拒绝该权限，选择不再提醒，返回false（不再提醒选项一般第二次请求的时候出现）</p>
<h4 id="运行时权限封装"><a href="#运行时权限封装" class="headerlink" title="运行时权限封装"></a>运行时权限封装</h4><pre><code>/**
 * @author moodstrikerdd
 * @date 2018/5/31
 * @label 运行时权限帮助类
 */
object RuntimePermissionHelper {
    val permissions = arrayListOf&lt;String&gt;()

    private val permissionNotAllowed = arrayListOf&lt;String&gt;()

    private const val REQUEST_CODE_PERMISSION = 1001

    private var requestCode = 0

    /**
     * 检查相应权限是否已经获取，没获取的权限放入permissionNotAllowed List中
     */
    fun checkPermissions(activity: Activity): Boolean {
        if (Build.VERSION.SDK_INT &lt; 23) {
            return true
        }
        permissionNotAllowed.clear()
        permissions.forEach {
            if (ActivityCompat.checkSelfPermission(activity, it) != PackageManager.PERMISSION_GRANTED) {
                permissionNotAllowed.add(it)
            }
        }
        return permissionNotAllowed.isEmpty()
    }

    /**
     * 方式一 请求权限
     * 先判断shouldShowRequestPermissionRationale，根据返回值决定是跳转设置界面还是请求权限
     */
    fun requestPermissions(activity: Activity, requestCode: Int = REQUEST_CODE_PERMISSION) {
        if (Build.VERSION.SDK_INT &lt; 23) {
            return
        }
        for (i in 0 until permissionNotAllowed.size) {
            val shouldShow = ActivityCompat.shouldShowRequestPermissionRationale(activity, permissionNotAllowed[i])
            val requested = SPUtils.get(permissionNotAllowed[i], false) as Boolean
            if (requested &amp;&amp; !shouldShow) {
                AlertDialog.Builder(activity)
                        .setTitle(&quot;提示&quot;)
                        .setMessage(&quot;当前应用缺少权限:${Permission.getPermissionName(permissionNotAllowed.toTypedArray())}。请点击\&quot;设置\&quot;,\&quot;权限\&quot;打开相应权限&quot;)
                        .setPositiveButton(&quot;设置&quot;) { _, _ -&gt; AppUtils.getAppDetailSettingIntent(activity) }
                        .setNegativeButton(&quot;取消&quot;) { dialog, _ -&gt; dialog.dismiss() }
                        .create()
                        .show()
                return
            }
        }
        RuntimePermissionHelper.requestCode = requestCode
        permissionNotAllowed.forEach { SPUtils.put(it, true) }
        ActivityCompat.requestPermissions(activity, permissionNotAllowed.toTypedArray(), requestCode)
    }

    /**
     * 方式二 请求权限
     * 直接请求未授权的权限
     */
    fun requestPermissions2(activity: Activity, requestCode: Int = REQUEST_CODE_PERMISSION) {
        if (Build.VERSION.SDK_INT &lt; 23) {
            return
        }
        RuntimePermissionHelper.requestCode = requestCode
        permissionNotAllowed.forEach { SPUtils.put(it, true) }
        ActivityCompat.requestPermissions(activity, permissionNotAllowed.toTypedArray(), requestCode)
    }

    /**
     * 方式二 直接请求所有权限
     */
    fun requestPermissionsWithoutCheck(activity: Activity, requestCode: Int = REQUEST_CODE_PERMISSION) {
        if (Build.VERSION.SDK_INT &lt; 23) {
            return
        }
        RuntimePermissionHelper.requestCode = requestCode
        ActivityCompat.requestPermissions(activity, permissions.toTypedArray(), requestCode)
    }

    /**
     * 方式一 结果回调 只存在 获取权限失败和成功
     */
    fun onRequestPermissionsResult(requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray, success: (requestCode: Int) -&gt; Unit) {
        if (requestCode == RuntimePermissionHelper.requestCode) {
            for (i in 0 until permissions.size) {
                if (grantResults[i] != PackageManager.PERMISSION_GRANTED) {
                    toast(message = &quot;必须同意所有该类权限才能使用本程序&quot;)
                    return
                }
            }
            success(requestCode)
        }
    }

    /**
     * 方式二 结果回调
     * 在回调结果中判断 shouldShowRequestPermissionRationale
     * 三种结果
     * 1.提示获取权限失败
     * 2.跳转设置界面
     * 3.获取权限成功
     */
    fun onRequestPermissionsResult2(activity: Activity, requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray, success: (requestCode: Int) -&gt; Unit) {
        if (requestCode == RuntimePermissionHelper.requestCode) {
            val permissionsNotAllowed = permissions.filterIndexed { index, _ -&gt;
                grantResults[index] != PackageManager.PERMISSION_GRANTED
            }
            for (i in 0 until permissions.size) {
                if (grantResults[i] != PackageManager.PERMISSION_GRANTED) {
                    if (ActivityCompat.shouldShowRequestPermissionRationale(activity, permissions[i])) {
                        toast(message = &quot;必须同意${Permission.getPermissionName(permissionsNotAllowed.toTypedArray())}权限才能使
                    } else {
                        AlertDialog.Builder(activity)
                                .setTitle(&quot;提示&quot;)
                                .setMessage(&quot;当前应用缺少权限:${Permission.getPermissionName(permissionsNotAllowed.toTypedArray())}。请点击\&quot;设置\&quot;,\&quot;权限\&quot;打开相应权限&quot;)
                                .setPositiveButton(&quot;设置&quot;) { _, _ -&gt; AppUtils.getAppDetailSettingIntent(activity) }
                                .setNegativeButton(&quot;取消&quot;) { dialog, _ -&gt; dialog.dismiss() }
                                .create()
                                .show()
                    }
                    return
                }
            }
            success(requestCode)
        }
    }
}
</code></pre><p>区别在于shouldShowRequestPermissionRationale的调用位置<br>1.在请求权限之前调用，当shouldShowRequestPermissionRationale返回false的时候跳转设置界面，返回true的时候调用requestPermissions请求权限<br>shouldShowRequestPermissionRationale返回false跳转设置界面是因为此时requestPermission已经不能获取权限，但是返回false的时候会有一个特殊情况就是当还未请求权限时，<br>因此需要通过SharedPreferences记录是否已经请求过该权限。在还未请求过时，请求权限，已经请求过的同时shouldShowRequestPermissionRationale发挥false的时候跳转到设置界面</p>
<pre><code>for (i in 0 until permissionNotAllowed.size) {
            val shouldShow = ActivityCompat.shouldShowRequestPermissionRationale(activity, permissionNotAllowed[i])
            val requested = SPUtils.get(permissionNotAllowed[i], false) as Boolean
            if (requested &amp;&amp; !shouldShow) {
                //TODO 跳转设置界面
                return
            }
        }
        RuntimePermissionHelper.requestCode = requestCode
        //可请求权限，并让请求的权限标记为已请求
        permissionNotAllowed.forEach { SPUtils.put(it, true) }
        ActivityCompat.requestPermissions(activity, permissionNotAllowed.toTypedArray(), requestCode)

</code></pre><p>2.在返回结果中调用，这种方式是为了避免还未请求时shouldShowRequestPermissionRationale返回false的特殊情况。<br>在请求权限失败的时候判断shouldShowRequestPermissionRationale的返回值，返回true的时候提示获取权限失败，false的时候跳转到设置界面。</p>
<pre><code>fun onRequestPermissionsResult2(activity: Activity, requestCode: Int, permissions: Array&lt;out String&gt;, grantResults: IntArray, success: (requestCode: Int) -&gt; Unit) {
        if (requestCode == RuntimePermissionHelper.requestCode) {
            val permissionsNotAllowed = permissions.filterIndexed { index, _ -&gt;
                grantResults[index] != PackageManager.PERMISSION_GRANTED
            }
            for (i in 0 until permissions.size) {
                if (grantResults[i] != PackageManager.PERMISSION_GRANTED) {
                    if (ActivityCompat.shouldShowRequestPermissionRationale(activity, permissions[i])) {
                        toast(message = &quot;必须同意${Permission.getPermissionName(permissionsNotAllowed.toTypedArray())}权限才能使
                    } else {
                       //TODO 跳转设置界面
                    }
                    return
                }
            }
            success(requestCode)
        }
    }
</code></pre><h3 id="8-0运行时权限"><a href="#8-0运行时权限" class="headerlink" title="8.0运行时权限"></a>8.0运行时权限</h3><p>在6.0到8.0之间的版本中，在运行时权限申请时，授权了组中的一个权限，会同时授权权限组中其他所有权限。而在8.0及以上版本中授权组中的一个权限，并不同时授权组中其他的权限，但是当你再次请求组中其他权限的时候，会直接授权，不需要用户选择。<br>例如 Manifest.permission.READ_EXTERNAL_STORAGE和Manifest.permission.WRITE_EXTERNAL_STORAGE，在6.0~8.0之间只需请求其中一个，另一个就会同时授权，而在8.0以上，授权了其中一个，当需要另一个权限的时候需要再次手动调用requestPermission，否则不会获的授权。<br>适配方式：<br>        1.请求权限时，将同组的权限全部请求授权。<br>        2.在每个需要权限的地方，都去申请相关权限。</p>
<pre><code>/**
 * @author moodstrikerdd
 * @date 2018/5/31
 * @label 6.0运行时权限
 */
object Permission {

    /**
     *读写日历。
     */
    val CALENDAR: Array&lt;String&gt;
    /**
     * 相机。
     */
    val CAMERA: Array&lt;String&gt;
    /**
     * 读写联系人。
     */
    val CONTACTS: Array&lt;String&gt;
    /**
     * 读位置信息。
     */
    val LOCATION: Array&lt;String&gt;
    /**
     * 使用麦克风。
     */
    val MICROPHONE: Array&lt;String&gt;
    /**
     * 读电话状态、打电话、读写电话记录。
     */
    val PHONE: Array&lt;String&gt;
    /**
     * 传感器。
     */
    val SENSORS: Array&lt;String&gt;
    /**
     * 读写短信、收发短信。
     */
    val SMS: Array&lt;String&gt;
    /**
     * 读写存储卡。
     */
    val STORAGE: Array&lt;String&gt;

    init {
        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.M) {
            CALENDAR = arrayOf()
            CAMERA = arrayOf()
            CONTACTS = arrayOf()
            LOCATION = arrayOf()
            MICROPHONE = arrayOf()
            PHONE = arrayOf()
            SENSORS = arrayOf()
            SMS = arrayOf()
            STORAGE = arrayOf()
        } else {
            CALENDAR = arrayOf(
                    Manifest.permission.READ_CALENDAR,
                    Manifest.permission.WRITE_CALENDAR)

            CAMERA = arrayOf(
                    Manifest.permission.CAMERA)

            CONTACTS = arrayOf(
                    Manifest.permission.READ_CONTACTS,
                    Manifest.permission.WRITE_CONTACTS,
                    Manifest.permission.GET_ACCOUNTS)

            LOCATION = arrayOf(
                    Manifest.permission.ACCESS_FINE_LOCATION,
                    Manifest.permission.ACCESS_COARSE_LOCATION)

            MICROPHONE = arrayOf(
                    Manifest.permission.RECORD_AUDIO)

            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {
                PHONE = arrayOf(
                        Manifest.permission.READ_PHONE_STATE,
                        Manifest.permission.READ_PHONE_NUMBERS,
                        Manifest.permission.ANSWER_PHONE_CALLS,
                        Manifest.permission.ADD_VOICEMAIL,
                        Manifest.permission.CALL_PHONE,
                        Manifest.permission.READ_CALL_LOG,
                        Manifest.permission.WRITE_CALL_LOG,
                        Manifest.permission.USE_SIP,
                        Manifest.permission.PROCESS_OUTGOING_CALLS)
            } else {
                PHONE = arrayOf(
                        Manifest.permission.READ_PHONE_STATE,
                        Manifest.permission.ADD_VOICEMAIL,
                        Manifest.permission.CALL_PHONE,
                        Manifest.permission.READ_CALL_LOG,
                        Manifest.permission.WRITE_CALL_LOG,
                        Manifest.permission.USE_SIP,
                        Manifest.permission.PROCESS_OUTGOING_CALLS)
            }

            SENSORS = arrayOf(
                    Manifest.permission.BODY_SENSORS)

            SMS = arrayOf(
                    Manifest.permission.SEND_SMS,
                    Manifest.permission.RECEIVE_SMS,
                    Manifest.permission.READ_SMS,
                    Manifest.permission.RECEIVE_WAP_PUSH,
                    Manifest.permission.RECEIVE_MMS)

            STORAGE = arrayOf(
                    Manifest.permission.READ_EXTERNAL_STORAGE,
                    Manifest.permission.WRITE_EXTERNAL_STORAGE)
        }
    }

    /**
     * 获取单个权限的名称
     */
    fun getPermissionName(permission: String): String {
        var permissionName = &quot;&quot;
        when {
            CALENDAR.contains(permission) -&gt; permissionName = &quot;日历&quot;
            CAMERA.contains(permission) -&gt; permissionName = &quot;相机&quot;
            CONTACTS.contains(permission) -&gt; permissionName = &quot;联系人&quot;
            LOCATION.contains(permission) -&gt; permissionName = &quot;定位&quot;
            MICROPHONE.contains(permission) -&gt; permissionName = &quot;麦克风&quot;
            PHONE.contains(permission) -&gt; permissionName = &quot;电话&quot;
            SENSORS.contains(permission) -&gt; permissionName = &quot;传感器&quot;
            SMS.contains(permission) -&gt; permissionName = &quot;短信&quot;
            STORAGE.contains(permission) -&gt; permissionName = &quot;读写存储&quot;
        }
        return permissionName
    }

    /**
     * 获取权限的拼接名称
     */
    fun getPermissionName(permission: Array&lt;String&gt;): String {
        val sb = StringBuilder()
        permission.forEach {
            val permissionName = getPermissionName(it)
            if (!TextUtils.isEmpty(permissionName) &amp;&amp; !sb.contains(permissionName)) {
                sb.append(&quot;$permissionName、&quot;)
            }
        }
        sb.deleteCharAt(sb.length - 1)
        return sb.toString()
    }
}
</code></pre>
        
                <blockquote style="margin: 2em 0 0;padding: 0.5em 1em;border-left: 3px solid #F44336;background-color: #F5F5F5;list-style: none;">
                    <p><strong>
                         
                            版权声明：本文为博主原创文章，未经博主允许不得转载。
                        </strong>
                        <br>
                        <strong>本文链接：</strong><a href="http://www.moodstrikerdd.com/2018/06/05/runtime-permission/">http://www.moodstrikerdd.com/2018/06/05/runtime-permission/</a>
                    </p>
                </blockquote>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2018/05/02/width-length-ems/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Moodstrikerdd's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        dd542814693@sina.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/05/">五月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/Android/Kotlin/">Kotlin<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/Android/View/">View<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/timeline" title="时光机">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时光机
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="推荐博客">
                
                    <i class="material-icons sidebar-material-icons">person outline</i>
                
                推荐博客
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">5</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Moodstrikerdd
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    
        <script>lsloader.load("sm_js","/js/smoothscroll.js?lOy/ACj5suSNi7ZVFVbpFQ==", true)</script>
    











<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
